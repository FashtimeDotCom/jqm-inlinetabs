/* jQM InlineTabs (c) 2012 Michael Strobel - MIT License
 * https://github.com/kryops/jqm-inlinetabs */
 (function(a,b){a.widget("mobile.inlinetabs",a.mobile.widget,{options:{iconpos:"left",scroll:null,theme:null,tabTheme:null,contentTheme:null,activeClass:a.mobile.activeBtnClass,mini:null,initSelector:":jqmData(role='inlinetabs')"},_create:function(){this.refresh(true)},refresh:function(g){if(!g){this.element.find(".ui-inlinetabs-content").unwrap()}var d=this.element,h=d.children(":not(:jqmData(tab-ignore))").first(),c=h.children(":not(:jqmData(tab-ignore))"),f=d.children(":gt(0):not(:jqmData(tab-ignore))"),i=f.wrapAll('<div class="ui-inlinetabs-container" />').parent();$activeTab=c.filter(g?":jqmData(active)":"."+o.activeClass).first(),o=this.options;if(o.theme){h.addClass("ui-bar-"+o.theme)}if(o.mini){h.addClass("ui-mini")}if(o.scroll){h.addClass("ui-inlinetabs-scroll")}h.addClass("ui-inlinetabs-bar").addClass(o.contentTheme?"ui-corner-top":"ui-corner-all");if(!$activeTab.length){$activeTab=c.first()}c.each(function(){$this=a(this);if(g||!$this.hasClass("ui-inlinetabs-tab")){$this.buttonMarkup({corners:false,shadow:false,inline:true,theme:$this.jqmData("theme")||o.tabTheme,iconpos:$this.jqmData("icon")?($this.jqmData("iconpos")||o.iconpos):b,mini:o.mini}).addClass("ui-corner-top ui-inlinetabs-tab")}});if(!g){c.removeClass(o.activeClass)}$activeTab.addClass(o.activeClass);var e=$activeTab.jqmData("tab")?f.filter(":jqmData(tab='"+$activeTab.jqmData("tab")+"')"):null;if(o.contentTheme){i.addClass("ui-body-"+o.contentTheme).addClass(o.theme?"ui-corner-bottom ui-inlinetabs-container-top":"ui-corner-all")}f.addClass("ui-inlinetabs-content").hide();if(e){e.show()}if(!g){h.off("vclick.inlinetabs",".ui-inlinetabs-tab")}h.on("vclick.inlinetabs",".ui-inlinetabs-tab",function(j){if(!a(j.target).hasClass("ui-disabled")){$this=a(this);c.removeClass(o.activeClass);$this.addClass(o.activeClass).trigger("tab-show");f.hide();var k=$this.jqmData("tab");if(k){f.filter(":jqmData(tab='"+k+"')").show().trigger("tab-show")}}});if(g&&o.scroll){h.on("vmousedown",function(j){a(this).jqmData("scrollpos",j.pageX)}).on("vmousemove",function(p){var n=a(this),j=p.pageX,l=n.jqmData("scrollpos");if(!l){return}var k=n.scrollLeft()-j+l,m=n[0].scrollWidth-d.width();if(m<0){m=0}if(k<0){k=0}else{if(k>=m){k=m-1}}n.scrollLeft(k);n.jqmData("scrollpos",j);p.preventDefault()}).on("mousewheel",function(l,n,k,j){if(typeof(n)=="undefined"||n==0){return}console.log(n);var m=a(this);m.scrollLeft(m.scrollLeft()-n*50);l.preventDefault()});a(document).on("vmouseup",function(){h.jqmRemoveData("scrollpos")})}},show:function(c){this.element.find(".ui-inlinetabs-tab:jqmData(tab='"+c+"')").trigger("vclick")}});a(document).bind("pagecreate create",function(c){a.mobile.inlinetabs.prototype.enhanceWithin(c.target)})})(jQuery);